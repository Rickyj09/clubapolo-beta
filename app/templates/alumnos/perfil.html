{% extends "base_admin.html" %}
{% block title %}Perfil del alumno{% endblock %}

{% block content %}
<div class="row">

    <!-- FOTO + DATOS B√ÅSICOS -->
    <div class="col-md-4 text-center">
        {% if alumno.foto %}
            <img src="{{ url_for('static', filename='uploads/alumnos/' ~ alumno.foto) }}"
                 class="img-fluid rounded mb-3"
                 style="max-height: 300px;">
        {% else %}
            <img src="{{ url_for('static', filename='img/avatar.png') }}"
                 class="img-fluid rounded mb-3"
                 style="max-height: 300px;">
        {% endif %}

        <h4>{{ alumno.nombres }} {{ alumno.apellidos }}</h4>

        {% if alumno.grado %}
            <span class="badge bg-dark">
                {{ alumno.grado.nombre }}
            </span>
        {% endif %}
    </div>

    <!-- INFO DEPORTIVA -->
    <div class="col-md-8">

        <h5 class="mb-3">üìã Datos f√≠sicos</h5>
        <ul class="list-group mb-4">
            <li class="list-group-item">
                <strong>Peso:</strong> {{ alumno.peso or '‚Äî' }} kg
            </li>
            <li class="list-group-item">
                <strong>Flexibilidad:</strong> {{ alumno.flexibilidad or '‚Äî' }}
            </li>
        </ul>

       <h5 class="mb-3">üèÜ Historial deportivo</h5>

{% if participaciones %}
<table class="table table-striped align-middle">
    <thead>
        <tr>
            <th>Torneo</th>
            <th>Fecha</th>
            <th>Modalidad</th>
            <th>Categor√≠a</th>
            <th>Resultado</th>
        </tr>
    </thead>
    <tbody>
        {% for p in participaciones %}
        <tr>
            <td>{{ p.torneo.nombre }}</td>
            <td>{{ p.torneo.fecha.strftime('%d/%m/%Y') }}</td>
            <td>
                <span class="badge bg-primary">
                    {{ p.modalidad }}
                </span>
            </td>
            <td>
                {% if p.categoria %}
                    {{ p.categoria.nombre }}
                {% else %}
                    <span class="text-muted">‚Äî</span>
                {% endif %}
            </td>
            <td>
                {% if p.medalla %}
                    üèÖ {{ p.medalla.nombre }}
                {% else %}
                    Participaci√≥n
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-muted">
    Este alumno a√∫n no registra participaciones en torneos.
</p>
{% endif %}


        <div class="mt-4">
            <a href="{{ url_for('participaciones.nuevo', alumno_id=alumno.id) }}"
               class="btn btn-outline-primary">
                ‚ûï Registrar participaci√≥n
            </a>

            <a href="{{ url_for('alumnos.editar', id=alumno.id) }}"
               class="btn btn-secondary ms-2">
                ‚úèÔ∏è Editar alumno
            </a>
        </div>

    </div>
</div>
{% endblock %}
